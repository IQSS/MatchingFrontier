<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Plot the Balance-Sample Size Frontier — plot.matchFrontier • MatchingFrontier</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Plot the Balance-Sample Size Frontier — plot.matchFrontier"><meta property="og:description" content="Plots the balance-sample size frontier for the supplied matchFrontier object. Can also plot covariate-specific mean differences, means, and other statistics to assess balance on individual covariates across the frontier."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MatchingFrontier</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/MatchingFrontier.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/psm-paradox.html">Examining the Propensity Score Matching Paradox</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/IQSS/MatchingFrontier/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot the Balance-Sample Size Frontier</h1>
    
    <div class="hidden name"><code>plot.matchFrontier.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Plots the balance-sample size frontier for the supplied <code>matchFrontier</code> object. Can also plot covariate-specific mean differences, means, and other statistics to assess balance on individual covariates across the frontier.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for matchFrontier</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, covs <span class="op">=</span> <span class="cn">NULL</span>, stat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>     <span class="va">n.estimated</span>, axis <span class="op">=</span> <span class="st">"ndrop"</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a <code>matchFrontier</code> object; the output of a call to <code><a href="makeFrontier.html">makeFrontier()</a></code>.</p></dd>

  <dt>covs</dt>
<dd><p>the names or covariates for which balance statistics are to be displayed, entered either as a character vector or one-sided <code>formula</code>. If <code>NULL</code> (the default), will display the frontier for the balance metric used in constructing the frontier if <code>stat = NULL</code> and otherwise will display the balance measure named in <code>stat</code> for all matching variables.</p></dd>

  <dt>stat</dt>
<dd><p>if <code>covs</code> is not <code>NULL</code>, the statistic to display across the frontier. Allowable options include <code>"std-diff"</code> for standardized mean differences (the default), <code>"diff"</code> for raw mean differences, <code>"ks"</code> for Kolmogorov-Smirnov statistics, <code>"std-mean"</code> for standardized means, <code>"mean"</code> for raw means, <code>"ks-target"</code> for sample-target Kolmogorov-Smirnov statistics, and <code>"ess"</code> for effect sample sizes. See Details. Abbreviations allowed.</p></dd>

  <dt>n.estimated</dt>
<dd><p>the number of points along the frontier for which to compute balance statistics. Computing statistics at every point on the frontier can be time-consuming for large frontiers, especially when computing Kolmogorov-Smirnov statistics, so using values less than the number of points can save time at the expense of providing less detail in the frontier plot. The default is 250 or the number of points, whichever is smaller. Ignored when <code>covs</code> and <code>stat</code> are both <code>NULL</code>.</p></dd>

  <dt>axis</dt>
<dd><p>whether to display the lower x-axis as the number or units dropped (<code>"ndrop"</code>) or the number of units remaining (<code>"n"</code>). Regardless, the other scale will be on the upper axis. When <code>x</code> is a <code>MatchItFrontier</code> object (i.e., resulting from <code><a href="makeFrontier.matchit.html">makeFrontier.matchit()</a></code>), can also be <code>"caliper"</code>, displaying the size of the hypothetical caliper corresponding to dropping the given dropped units. When <code>"caliper"</code>, the caliper is scaled by the standard deviation of the propensity scores. Default is <code>"ndrop"</code>; abbreviations allowed.</p></dd>

  <dt>...</dt>
<dd><p>if <code>covs</code> and <code>stat</code> are both <code>NULL</code>, further arguments passed to <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">ggplot2::geom_line()</a></code> to control the appearance of the plot (e.g., <code>color</code>, <code>size</code>, etc.). Ignored otherwise.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p><code>plot.matchFrontier()</code> uses <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">ggplot2::geom_line()</a></code> to display the balance-sample size frontier. Unless <code>axis = "caliper"</code>, the plot has two x-axes: one indicates the number of units dropped, and the other indicates the number of units remaining. Which group this "number of units" refers to depends on the <code>QOI</code> supplied to the original call to <code><a href="makeFrontier.html">makeFrontier()</a></code>.</p>
<p>When <code>covs</code> and <code>stat</code> are both <code>NULL</code>, the y-axis indicates the value of the imbalance metric at the given sample size; otherwise, it indicates the value of the statistic for the covariates supplied to <code>covs</code> depending on the arguments to <code>stat</code>.</p>
<p>When <code>stat</code> is not <code>NULL</code>, one of seven plots can be produced:</p><ol><li><p>standardized mean differences between treatment groups (<code>stat = "std-diff"</code>, the default).</p></li>
<li><p>raw mean differences between treatment groups (<code>stats = "diff"</code>)</p></li>
<li><p>Kolmogorov-Smirnov statistics between the treatment groups (<code>stat = "ks"</code>)</p></li>
<li><p>standardized means, which are equivalent to standardized mean differences between the full matched sample and the target sample (<code>stat = "std-mean"</code>)</p></li>
<li><p>raw means in the matched sample (<code>stat = "mean"</code>)</p></li>
<li><p>Sample-target Kolmogorov-Smirnov statistics, the Kolmogorov-Smirnov statistic between the full matched sample and the target sample (<code>stat = "ks-target"</code>)</p></li>
<li><p>effective sample sizes in the treated and control groups (<code>stat = "ess"</code>)</p></li>
</ol><p>The target sample depends on the argument to <code>QOI</code> in the original call to <code><a href="makeFrontier.html">makeFrontier()</a></code>: when <code>"SATE"</code> or <code>"FSATE"</code>, the target sample is the full sample prior to matching; when <code>"SATT"</code> or <code>"FSATT"</code>, the target sample is the treated group prior to matching. The target sample also determines the standardization factor when computing standardized means or mean differences. For <code>MatchItFrontier</code> objects, the target sample is the treated group prior to matching (because the FSATT is always the target estimand).</p>
<p>When <code>stat = "mean"</code>, a dashed line will appear on the plot for each covariate indicating its mean in the target sample. Otherwise, an additional point will be plotted indicating the statistic computed prior to matching; for energy distance- and bin-based frontiers, this is the start of the frontier, but for pair distance-based frontier, the frontier starts after matching, so the additional point corresponds to balance prior to the initial point of the frontier.</p>
<p>When <code>stat = "ess"</code>, the effective sample size (ESS) is computed for each treatment group as \((\sum w)^2/\sum w^2\) within each treatment group where \(w\) are the matching weights at the given point on the frontier. <code>covs</code> will be ignored because the ESS is only a function of the weights. In some cases, it is possible for the ESS to increase even as the number of units remaining in the sample decreases.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>ggplot</code> object that can be further manipulated using <span class="pkg">ggplot2</span> functionality. For example, to zoom in on an area of the plot, <code><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian()</a></code> can be used.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="makeFrontier.html">makeFrontier()</a></code>, <code><a href="makeFrontier.matchit.html">makeFrontier.matchit()</a></code>, <code><a href="summary.matchFrontier.html">summary.matchFrontier()</a></code>, <code><a href="plot.frontierEstimates.html">plot.frontierEstimates()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"MatchIt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Pair distance frontier for FSATT</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="makeFrontier.html">makeFrontier</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">re74</span>,</span></span>
<span class="r-in"><span>                   data <span class="op">=</span> <span class="va">lalonde</span>, QOI <span class="op">=</span> <span class="st">"FSATT"</span>,</span></span>
<span class="r-in"><span>                   metric <span class="op">=</span> <span class="st">"dist"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot the balance metric frontier</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">f1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.matchFrontier-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot standardized mean differences</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">f1</span>,</span></span>
<span class="r-in"><span>     covs <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">re74</span>,</span></span>
<span class="r-in"><span>     stat <span class="op">=</span> <span class="st">"std-diff"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.matchFrontier-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot standardized deviations from the mean</span></span></span>
<span class="r-in"><span><span class="co">#of the treated group in the original</span></span></span>
<span class="r-in"><span><span class="co">#sample (prior to matching)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">f1</span>,</span></span>
<span class="r-in"><span>     covs <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">re74</span>,</span></span>
<span class="r-in"><span>     stat <span class="op">=</span> <span class="st">"std-mean"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.matchFrontier-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot effective samples</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">f1</span>, stat <span class="op">=</span> <span class="st">"ess"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.matchFrontier-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot covariate means across the frontier;</span></span></span>
<span class="r-in"><span><span class="co">#make sure variables are on the same scale!</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">f1</span>,</span></span>
<span class="r-in"><span>     covs <span class="op">=</span> <span class="op">~</span><span class="va">married</span> <span class="op">+</span> <span class="va">nodegree</span>,</span></span>
<span class="r-in"><span>     stat <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.matchFrontier-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plotting a frontier using MatchIt</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://kosukeimai.github.io/MatchIt/" class="external-link">"MatchIt"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#1:1 nearest neighbor propensity score matching</span></span></span>
<span class="r-in"><span><span class="co">#without replacement</span></span></span>
<span class="r-in"><span><span class="va">m.out</span> <span class="op">&lt;-</span> <span class="fu">MatchIt</span><span class="fu">::</span><span class="fu"><a href="https://kosukeimai.github.io/MatchIt/reference/matchit.html" class="external-link">matchit</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">re74</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">lalonde</span>, method <span class="op">=</span> <span class="st">"nearest"</span>,</span></span>
<span class="r-in"><span>  ratio <span class="op">=</span> <span class="fl">1</span>, replace <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m.out</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A matchit object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: 1:1 nearest neighbor matching without replacement</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - distance: Propensity score</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              - estimated with logistic regression</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614 (original), 370 (matched)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - target estimand: ATT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Assess the energy distance as pairs are dropped</span></span></span>
<span class="r-in"><span><span class="va">fm</span> <span class="op">&lt;-</span> <span class="fu"><a href="makeFrontier.html">makeFrontier</a></span><span class="op">(</span><span class="va">m.out</span>, metric <span class="op">=</span> <span class="st">"energy"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Computing distance matrix...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Calculating frontier...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Done!</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fm</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A matchFrontier object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - quantity of interest: FSATT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - imbalance metric: energy distance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - treatment: treat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - covariates: age, educ, married, re74</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - number of points: 176</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot the balance metric frontier</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fm</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.matchFrontier-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot the frontier with caliper width on the x-axis</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fm</span>, axis <span class="op">=</span> <span class="st">"caliper"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.matchFrontier-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot Kolmogorov-Smirnov statistics</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fm</span>,</span></span>
<span class="r-in"><span>     covs <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">re74</span>,</span></span>
<span class="r-in"><span>     stat <span class="op">=</span> <span class="st">"ks"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot.matchFrontier-8.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gary King, Christopher Lucas, Richard Nielsen, Noah Greifer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

