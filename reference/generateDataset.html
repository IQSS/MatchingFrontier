<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate a dataset at a point along the frontier — generateDataset • MatchingFrontier</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a dataset at a point along the frontier — generateDataset"><meta property="og:description" content="generateDataset() generates a dataset at a given point along the frontier identified either by the number of units remaining or the number of units dropped at that point on the frontier. This dataset can then be used in the final analysis. generateDataset() works just like MatchIt::match.data() or MatchIt::get_matches() and produces the same output as these functions when they are used on a matchit object (i.e., a data frame containing the matched units)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MatchingFrontier</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/MatchingFrontier.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/psm-paradox.html">Examining the Propensity Score Matching Paradox</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/IQSS/MatchingFrontier/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a dataset at a point along the frontier</h1>
    
    <div class="hidden name"><code>generateDataset.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>generateDataset()</code> generates a dataset at a given point along the frontier identified either by the number of units remaining or the number of units dropped at that point on the frontier. This dataset can then be used in the final analysis. <code>generateDataset()</code> works just like <code><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">MatchIt::match.data()</a></code> or <code><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">MatchIt::get_matches()</a></code> and produces the same output as these functions when they are used on a <code>matchit</code> object (i.e., a data frame containing the matched units).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generateDataset</span><span class="op">(</span><span class="va">frontier.object</span>, <span class="va">N</span>, <span class="va">Ndrop</span>,</span>
<span>                weights <span class="op">=</span> <span class="st">"weights"</span>, dup <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                subclass <span class="op">=</span> <span class="st">"subclass"</span>, id <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>frontier.object</dt>
<dd><p>a <code>matchFrontier</code> object; the output of a call to <code><a href="makeFrontier.html">makeFrontier()</a></code>.</p></dd>

  <dt>N</dt>
<dd><p>the number of units remaining in the sample at the desired point on the frontier. Exactly one of <code>N</code> or <code>Ndrop</code> must be specified.</p></dd>

  <dt>Ndrop</dt>
<dd><p>the number of units dropped in the sample at the desired point on the frontier. Exactly one of <code>N</code> or <code>Ndrop</code> must be specified.</p></dd>

  <dt>weights</dt>
<dd><p>a string containing the name that should be given to the variable containing the matching weights in the data frame output. Default is <code>"weights"</code>.</p></dd>

  <dt>dup</dt>
<dd><p>when using a pair distance-based frontier, whether to have a row for each unit (<code>FALSE</code>), equivalent to using <code><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">MatchIt::match.data()</a></code>, or a row for each unit for each pair they are a part of (<code>TRUE</code>), equivalent to using <code><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">MatchIt::get_matches()</a></code>. When <code>FALSE</code>, pair membership is omitted. When <code>TRUE</code>, pair membership and unit ID are stored in additional variables named based on the <code>subclass</code> and <code>id</code> arguments, respectively. <code>dup</code> is ignored for other types of frontiers.</p></dd>

  <dt>subclass</dt>
<dd><p>when using a pair distance-based frontier and <code>dup = TRUE</code>, a string containing the name that should be given to the variable containing the matched pair membership in the data frame output. Default is <code>"subclass"</code>.</p></dd>

  <dt>id</dt>
<dd><p>when using a pair distance-based frontier and <code>dup = TRUE</code>, a string containing the name that should be given to the variable containing the unit IDs in the data frame output. Default is <code>"id"</code>. For other types of frontiers or when <code>dup = FALSE</code>, the units IDs are stored in the row names of the returned data frame.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The argument to <code>N</code> or <code>Ndrop</code> depend on the quantity of interest (QOI) supplied to the original call to <code><a href="makeFrontier.html">makeFrontier()</a></code>. When <code>QOI</code> was <code>"SATE"</code> or <code>"FSATE"</code>, they correspond to the total number of units remaining or dropped. When <code>QOI</code> was <code>"SATT"</code>, they correspond to the number of control units remaining or dropped (since no treated units are dropped). When <code>QOI</code> was <code>"FSATT"</code>, they correspond to the number of treated units remaining or dropped. See also the <code>n</code> component of the <code>matchFrontier</code> object at <code><a href="makeFrontier.html">makeFrontier()</a></code>. When using <code><a href="summary.matchFrontier.html">summary.matchFrontier()</a></code>, the carrot printed underneath the summary table indicates which group <code>N</code> and <code>Ndrop</code> refer to.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame containing the data supplied to the original call to <code><a href="makeFrontier.html">makeFrontier()</a></code> with the computed output variables appended as additional columns, named according the arguments above. When using a pair distance-based frontier and <code>dup = TRUE</code>, <code>generateDataset()</code> sorts the data by subclass and treatment status; otherwise, the data will be in their original order.</p>


<p>The returned data frame will contain the variables in the original data set and the following columns:</p>
<dl><dt>weights</dt>
<dd><p>the computed matching weights. These must be used in effect estimation to correctly incorporate the matching.</p></dd>

<dt>subclass</dt>
<dd><p>matched pair membership. Units with the same value are in the same pair. Only included when using a pair distance-based frontier and <code>dup = TRUE</code>.</p></dd>

<dt>id</dt>
<dd><p>the ID of each unit, corresponding to the row names in the original data or dataset. Only included when using a pair distance-based frontier and <code>dup = TRUE</code>. This column can be used to identify which rows belong to the same unit since, e.g., the same control unit may appear multiple times, being matched to multiple treated units.</p></dd>


</dl><p>These columns will take on the name supplied to the corresponding arguments in the call to <code>generateData()</code>.</p>


<p>In addition to their base class (e.g., <code>data.frame</code> or <code>tbl</code>), returned objects have the class <code>matchdata</code> or <code>getmatches</code>. See <code><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">MatchIt::match.data()</a></code> for details.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="frontier_to_matchit.html">frontier_to_matchit()</a></code> for generating a <code>matchit</code> object at a point on the frontier, <code><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">MatchIt::match.data()</a></code> or <code><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">MatchIt::get_matches()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"MatchIt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Pair distance frontier for FSATT</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="makeFrontier.html">makeFrontier</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">re74</span>,</span></span>
<span class="r-in"><span>                   data <span class="op">=</span> <span class="va">lalonde</span>, QOI <span class="op">=</span> <span class="st">"FSATT"</span>,</span></span>
<span class="r-in"><span>                   metric <span class="op">=</span> <span class="st">"dist"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">f1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="generateDataset-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">md1</span> <span class="op">&lt;-</span> <span class="fu">generateDataset</span><span class="op">(</span><span class="va">f1</span>, Ndrop <span class="op">=</span> <span class="fl">120</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">md1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "treat"    "age"      "educ"     "race"     "married"  "nodegree"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "re74"     "re75"     "re78"     "weights" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">md2</span> <span class="op">&lt;-</span> <span class="fu">generateDataset</span><span class="op">(</span><span class="va">f1</span>, Ndrop <span class="op">=</span> <span class="fl">120</span>, dup <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">md2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "id"       "subclass" "weights"  "treat"    "age"      "educ"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "race"     "married"  "nodegree" "re74"     "re75"     "re78"    </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#The same can be accomplished by fist converting to</span></span></span>
<span class="r-in"><span><span class="co">#a matchit object and then using match.data() or</span></span></span>
<span class="r-in"><span><span class="co">#get_matches()</span></span></span>
<span class="r-in"><span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="frontier_to_matchit.html">frontier_to_matchit</a></span><span class="op">(</span><span class="va">f1</span>, Ndrop <span class="op">=</span> <span class="fl">120</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">md1</span>, <span class="fu">MatchIt</span><span class="fu">::</span><span class="fu"><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">match.data</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">md2</span>, <span class="fu">MatchIt</span><span class="fu">::</span><span class="fu"><a href="https://kosukeimai.github.io/MatchIt/reference/match.data.html" class="external-link">get_matches</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gary King, Christopher Lucas, Richard Nielsen, Noah Greifer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

